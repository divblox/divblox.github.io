(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{164:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return u}));var a=n(2),o=n(9),i=(n(0),n(171)),r=n(172),c=(n(178),n(179),n(175)),l={id:"common-examples-data-model-changes",title:"Dealing with Data Model Changes"},s={id:"common-examples-data-model-changes",isDocsHomePage:!1,title:"Dealing with Data Model Changes",description:"checkUrlScroll();",source:"@site/docs/common-examples-data-model-changes.mdx",permalink:"/docs/common-examples-data-model-changes",sidebar:"someSidebar",previous:{title:"Media Library and Image Viewer",permalink:"/docs/common-examples-media-library-and-image-viewer"},next:{title:"Other Common Examples",permalink:"/docs/common-examples-other-common-examples"}};Object(c.a)();var d=[{value:"Adapting to Data Model Changes",id:"adapting-to-data-model-changes",children:[]},{value:"Customising the full CRUD component wrapper",id:"customising-the-full-crud-component-wrapper",children:[]}],p={rightToc:d};function u(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"adapting-to-data-model-changes"},"Adapting to Data Model Changes"),Object(i.b)("p",null,"This section will briefly go over how to reuse and adjust components as needed even after you update the data model (e.g. You have added or removed some entity attributes).\nFor this example we will have a very simple test entity called ",Object(i.b)("inlineCode",{parentName:"p"},"Car"),". Initially we will include the attributes 'Make', 'Model' and 'Year' and then sync and gen the data model.\nWe create a full CRUD component from this entity, and show below how to update your components with new attributes."),Object(i.b)("video",{width:"100%",height:"100%",playsInline:!0,muted:!0,poster:Object(r.a)("img/video-placeholder.png"),preload:"true",controls:!0},Object(i.b)("source",{src:Object(r.a)("_common-examples-media/data-model-changes.mp4"),type:"video/mp4"})),Object(i.b)("p",null,"Below is the 'car_crud_create' component.html file. Here you can see the div with id=",Object(i.b)("inlineCode",{parentName:"p"},"AdditionalInputFieldsWrapper")," where all additional attributes will automatically be placed."),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html",metastring:"{24-26}","{24-26}":!0}),'<div id="ComponentWrapper" class="component-wrapper">\n    <div id="ComponentPlaceholder" class="component_placeholder component_placeholder_data_view">\n        <div id="ComponentFeedback"></div>\n    </div>\n    <div id="ComponentContent" class="component-content" style="display:none">\n        <div class="container-fluid container-no-gutters">\n            <div class="row">\n                <div class="col-sm-6 col-md-4 col-xl-3">\n                    <div id="MakeWrapper" class="entity-instance-input-field">\n                        {Make}\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-4 col-xl-3">\n                    <div id="ModelWrapper" class="entity-instance-input-field">\n                        {Model}\n                    </div>\n                </div>\n                <div class="col-sm-6 col-md-4 col-xl-3">\n                    <div id="YearReleasedWrapper" class="entity-instance-input-field">\n                        {YearReleased}\n                    </div>\n                </div>\n            </div>\n            <div id="AdditionalInputFieldsWrapper" class="row">\n                \x3c!-- Fields that are included by the component, but not provided for by wrappers will be rendered here... --\x3e\n            </div>\n            <div class="row">\n                <div class="col-md-6"></div>\n                <div class="col-md-6">\n                    <div class="row">\n                        <div class="col-md-6"></div>\n                        <div class="col-md-6">\n                            <button id="btnSave" type="button" class="btn btn-primary fullwidth mt-1">Create</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')),Object(i.b)("p",null,"If you want to include them with custom bootstrap sizing and/or styles, just copy the structure of existing attribute fields, namely in the form of:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html"}),'<div class="col-sm-6 col-md-4 col-xl-3">\n    <div id="AttributeNameWrapper" class="entity-instance-input-field">\n        {AttributeName}\n    </div>\n</div>\n')),Object(i.b)("p",null,"Where you replace 'AttributeName' with the relevant attribute name. You can also then add CSS classes as needed. Any remaining included attributes without token placeholders will\nbe placed  in the AdditionalInputFieldsWrapper section. The final step would be to customise the way dxRenderer actually displays attribute fields\nin the DOM. By default it will create the input field based on the data type of the attribute. But, there are many data types available.\nBelow is a screenshot of the renderInputField method of the dxRenderer object. The case statements are all possible input types, which the developer can manipuate as they like."),Object(i.b)("div",{className:"text--center"},Object(i.b)("img",{alt:"Create Component",src:Object(r.a)("_common-examples-media/dxRenderInpuFields.png")})),Object(i.b)("p",null,"Let's use an example. Let's say we know that all the cars on our system are released between the years 2010 and 2020. We want to restrict a user from being able to select a date in the 1200s for example.\nThis is done in the file entity_definition.json located at ",Object(i.b)("inlineCode",{parentName:"p"},"project/assets/configurations/data_model/entity_definitions.json"),"."),Object(i.b)("p",null,"The generic process is as follows:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Define any lists you will be using in the file data_lists.json located at ",Object(i.b)("inlineCode",{parentName:"li"},"project/assets/configurations/data_model/generated/data_lists.json")),Object(i.b)("li",{parentName:"ol"},"Refer to the file entity_definitions_base.json (which is generated by Divblox) to see the structure of entity definitions."),Object(i.b)("li",{parentName:"ol"},"Copy the entity's definition you would like to override into entity_definitions.json and make the necessary modifications.all")),Object(i.b)("video",{width:"100%",height:"100%",playsInline:!0,muted:!0,poster:Object(r.a)("img/video-placeholder.png"),preload:"true",controls:!0},Object(i.b)("source",{src:Object(r.a)("_common-examples-media/entity_definitions.mov"),type:"video/mp4"})),Object(i.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"})))),"note")),Object(i.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"Do not edit in the base file as this will be regenerated every time you synchronise the database."))),Object(i.b)("h2",{id:"customising-the-full-crud-component-wrapper"},"Customising the full CRUD component wrapper"),Object(i.b)("p",null,"This section will briefly discuss how Divblox handles CRUD component interactions. When you create a full CRUD component in the component builder,\nthis creates an inherently linked set of 4 components:"),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"The CRUD_create component"),Object(i.b)("li",{parentName:"ol"},"the CRUD_update component"),Object(i.b)("li",{parentName:"ol"},"The CRUD_data_series (or data_table) component"),Object(i.b)("li",{parentName:"ol"},"And a wrapper to house them, as well as relevant buttons and links.")),Object(i.b)("p",null,"Deleting any of the children components will break the wrapper component. If you need individual components, you can create them as such.\nIf, for example, you just want to remove the CRUD_create component, you can also do so, but there are a few things to notice."),Object(i.b)("p",null,"Firstly, you can go ahead and delete your CRUD_create component. Then you need to do some cleaning up. The highlighted code below signifies sections we will be removing."),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},'Remove the "Create" button as well as the div wrapper for the CRUD_create component from the wrapper CRUD component HTML.')),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-html",metastring:"{15,29-38}","{15,29-38}":!0}),'<div id="ComponentWrapper" class="component-wrapper">\n    <div id="ComponentPlaceholder" class="component_placeholder component_placeholder_general">\n        <div id="ComponentFeedback"></div>\n    </div>\n    <div id="ComponentContent" class="component-content" style="display:none">\n        <div class="container-fluid">\n            <div class="row mt-n4 crud-component-wrapper-data-list">\n                <div class="col-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">\n                    <div id="data_series_wrapper" style="display:none;">\n                        <div id="data_series"/>\n                        <div class="row">\n                            <div class="col-md-4"></div>\n                            <div class="col-md-4"></div>\n                            <div class="col-md-4">\n                                <button id="button_create" type="button" class="btn btn-outline-primary fullwidth mt-1"><i class="fa fa-plus" aria-hidden="true"></i> Car</button>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="data_update_wrapper" style="display:none;">\n                        <div class="row">\n                            <div class="col-md-4">\n                                <button id="button_update_back" type="button" class="btn btn-link crud-component-back-button-data-list"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back</button>\n                            </div>\n                            <div class="col-md-4"></div>\n                            <div class="col-md-4"></div>\n                        </div>\n                        <div id="data_update"/>\n                    </div>\n                    <div id="data_create_wrapper" style="display:none;">\n                        <div class="row">\n                            <div class="col-md-4">\n                                <button id="button_create_back" type="button" class="btn btn-link crud-component-back-button-data-list"><i class="fa fa-long-arrow-left" aria-hidden="true"></i> Back</button>\n                            </div>\n                            <div class="col-md-4"></div>\n                            <div class="col-md-4"></div>\n                        </div>\n                        <div id="data_create"/>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n')),Object(i.b)("ol",{start:2},Object(i.b)("li",{parentName:"ol"},"Remove any orphaned JavaScript functionality relating to the CRUD_creae component.")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js",metastring:"{17-21,34-37,42,57-62,70}","{17-21,34-37,42,57-62,70}":!0}),'if (typeof component_classes[\'data_model_car_crud\'] === "undefined") {\n    class data_model_car_crud extends DivbloxDomBaseComponent {\n        constructor(inputs, supports_native, requires_native) {\n            super(inputs, supports_native, requires_native);\n            // Sub component config start\n            this.sub_component_definitions = [\n                {\n                    "component_load_path": "data_model/car_crud_data_series",\n                    "parent_element": "data_series",\n                    "arguments": {"uid": this.getUid() + "_car_crud_data_series_component"}\n                },\n                {\n                    "component_load_path": "data_model/car_crud_update",\n                    "parent_element": "data_update",\n                    "arguments": {"uid": this.getUid() + "_car_crud_update_component"}\n                },\n                {\n                    "component_load_path": "data_model/car_crud_create",\n                    "parent_element": "data_create",\n                    "arguments": {"uid": this.getUid() + "_car_crud_create_component"}\n                }];\n            // Sub component config end\n        }\n\n        reset(inputs, propagate) {\n            super.reset(inputs, propagate);\n            this.toggleSubView("data_series_wrapper");\n        }\n\n        eventTriggered(event_name, parameters_obj) {\n            // Handle specific events here. This is useful if the component needs to update because one of its\n            // sub-components did something\n            switch (event_name) {\n                case \'car_crud_create_clicked\':\n                    this.toggleSubView("data_create_wrapper");\n                    getRegisteredComponent(this.getUid() + "_car_crud_create_component").reset();\n                    break;\n                case \'car_clicked\':\n                    this.toggleSubView("data_update_wrapper");\n                    getRegisteredComponent(this.getUid() + "_car_crud_update_component").reset(parameters_obj.id, true);\n                    break;\n                case \'car_created\':\n                case \'car_deleted\':\n                case \'car_updated\':\n                case \'car_crud_back_clicked\':\n                    this.toggleSubView("data_series_wrapper");\n                    getRegisteredComponent(this.getUid() + "_car_crud_data_series_component").reset();\n                    break;\n                default:\n                    dxLog("Event triggered: " + event_name + ": " + JSON.stringify(parameters_obj));\n            }\n            // Let\'s pass the event to all sub components\n            this.propagateEventTriggered(event_name, parameters_obj);\n        }\n\n        registerDomEvents() {\n            getComponentElementById(this, "button_create").on("click", function () {\n                pageEventTriggered("car_crud_create_clicked", {});\n            });\n            getComponentElementById(this, "button_create_back").on("click", function () {\n                pageEventTriggered("car_crud_back_clicked", {});\n            });\n            getComponentElementById(this, "button_update_back").on("click", function () {\n                pageEventTriggered("car_crud_back_clicked", {});\n            });\n        }\n\n        toggleSubView(view_element_id) {\n            // Remove data_create_wrapper from the view_array\n            let view_array = ["data_series_wrapper", "data_update_wrapper", "data_create_wrapper"];\n            getComponentElementById(this, view_element_id).fadeIn("slow");\n            view_array.forEach(function (item) {\n                if (item !== view_element_id) {\n                    getComponentElementById(this, item).hide();\n                }\n            }.bind(this));\n        }\n    }\n\n    component_classes[\'data_model_car_crud\'] = data_model_car_crud;\n}\n')),Object(i.b)("p",null,"And that is it! You can use similar logic to remove the update component or further customise the CRUD to your liking."))}u.isMDXComponent=!0},170:function(e,t,n){"use strict";var a=n(0),o=n(52);t.a=function(){return Object(a.useContext)(o.a)}},171:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return b}));var a=n(0),o=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=o.a.createContext({}),d=function(e){var t=o.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=d(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},m=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=d(n),m=a,b=p["".concat(r,".").concat(m)]||p[m]||u[m]||i;return n?o.a.createElement(b,c(c({ref:t},s),{},{components:n})):o.a.createElement(b,c({ref:t},s))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,r[1]=c;for(var s=2;s<i;s++)r[s]=n[s];return o.a.createElement.apply(null,r)}return o.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},172:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(78);var a=n(170),o=n(174);function i(e,t){var n=void 0===t?{}:t,i=n.forcePrependBaseUrl,r=void 0!==i&&i,c=n.absolute,l=void 0!==c&&c,s=Object(a.a)().siteConfig,d=(s=void 0===s?{}:s).baseUrl,p=void 0===d?"/":d,u=s.url;if(!e)return e;if(r)return p+e;if(!Object(o.a)(e))return e;var m=p+e.replace(/^\//,"");return l?u+m:m}},173:function(e,t,n){"use strict";function a(e){var t,n,o="";if("string"==typeof e||"number"==typeof e)o+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(o&&(o+=" "),o+=n);else for(t in e)e[t]&&(o&&(o+=" "),o+=t);return o}t.a=function(){for(var e,t,n=0,o="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(o&&(o+=" "),o+=t);return o}},174:function(e,t,n){"use strict";function a(e){return!1===/^(https?:|\/\/|mailto:|tel:)/.test(e)}n.d(t,"a",(function(){return a}))},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n(0);const a=()=>{setTimeout((function(){if("undefined"!=typeof window){let e=window.location.href.split("#");if(e.length>1){let t=e[1];document.getElementById(t).scrollIntoView()}}}),500)}},176:function(e,t,n){"use strict";var a=n(0),o=Object(a.createContext)({tabGroupChoices:{},setTabGroupChoices:function(){},isAnnouncementBarClosed:!1,closeAnnouncementBar:function(){}});t.a=o},177:function(e,t,n){"use strict";var a=n(0),o=n(176);t.a=function(){return Object(a.useContext)(o.a)}},178:function(e,t,n){"use strict";n(24),n(19),n(20);var a=n(0),o=n.n(a),i=n(177),r=n(173),c=n(130),l=n.n(c),s=37,d=39;t.a=function(e){var t=e.block,n=e.children,c=e.defaultValue,p=e.values,u=e.groupId,m=Object(i.a)(),b=m.tabGroupChoices,v=m.setTabGroupChoices,h=Object(a.useState)(c),f=h[0],_=h[1];if(null!=u){var g=b[u];null!=g&&g!==f&&p.some((function(e){return e.value===g}))&&_(g)}var y=function(e){_(e),null!=u&&v(u,e)},w=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(r.a)("tabs",{"tabs--block":t})},p.map((function(e){var t=e.value,n=e.label;return o.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":f===t,className:Object(r.a)("tabs__item",l.a.tabItem,{"tabs__item--active":f===t}),key:t,ref:function(e){return w.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case d:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case s:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(w,e.target,e)},onFocus:function(){return y(t)},onClick:function(){return y(t)}},n)}))),o.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter((function(e){return e.props.value===f}))[0]))}},179:function(e,t,n){"use strict";var a=n(0),o=n.n(a);t.a=function(e){return o.a.createElement("div",null,e.children)}}}]);